(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([["21239"],{60680:function(e,t,s){var i=s(13222),d=/[\\^$.*+?()[\]{}|]/g,n=RegExp(d.source);e.exports=function(e){return(e=i(e))&&n.test(e)?e.replace(d,"\\$&"):e}},98537:function(e,t,s){"use strict";s.d(t,{O:()=>eb});var i=s(74848),d=s(64482),n=s(24629),l=s(17427),r=s(96540),a=s(52605);let o=e=>r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 6V5a2.5 2.5 0 0 0-5 0v1zM4 5v1a3 3 0 0 0-3 3v3a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3V5a4 4 0 0 0-8 0m6.5 2.5H12A1.5 1.5 0 0 1 13.5 9v3a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 12V9A1.5 1.5 0 0 1 4 7.5zm-1.75 2a.75.75 0 0 0-1.5 0v2a.75.75 0 0 0 1.5 0z",clipRule:"evenodd"}));var c=s(3477),u=s(53681),p=s(72835),m=s(61885),I=s(77269),h=s(71721),x=s(56841),y=s(3411),f=s(94032),b=s(80108),v=s(71112),g=s(85169),B=s(54699);let S=(0,B.om)("list-container-view"),j=r.forwardRef(function({as:e="div",role:t="listbox",children:s,id:d,className:n,fixedHeight:l,extraProps:r,qa:a,style:o},c){return(0,i.jsx)(g.s,{qa:a,as:e,direction:"column",ref:c,grow:!0,tabIndex:-1,id:d,role:t,style:o,className:S({"fixed-height":l},n),...r,children:s})}),w=e=>null!==e&&"object"==typeof e&&"data"in e,C=(0,B.om)("list-recursive-renderer");function k({id:e,itemSchema:t,list:s,...d}){let n=d.children(e,s.structure.idToFlattenIndex[e]);if(w(t)&&t.children){let l=!s.state.expandedById||!(e in s.state.expandedById)||s.state.expandedById[e];return(0,i.jsxs)("ul",{style:d.style,className:C(null,d.className),role:"group",children:[n,l&&!!s.structure.groupsState[e]?.childrenIds&&t.children.map((t,n)=>(0,i.jsx)(k,{list:s,id:s.structure.groupsState[e].childrenIds[n],itemSchema:t,...d},n))]})}return n}function R({containerRef:e,renderItem:t,list:s,...d}){return(0,i.jsx)(j,{ref:e,...d,children:s.structure.items.map((e,d)=>(0,i.jsx)(k,{itemSchema:e,id:s.structure.rootIds[d],list:s,children:t},d))})}let N=({list:e,multiple:t})=>({id:s})=>{e.state.disabledById[s]||(e.state.setActiveItemId(s),e.state.expandedById&&s in e.state.expandedById&&e.state.setExpanded?e.state.setExpanded(e=>({...e,[s]:!e[s]})):e.state.setSelected(e=>({...t?e:{},[s]:!t||!e[s]})))};var E=s(95100);let $="data-list-item",D={s:[22,44],m:[26,44],l:[34,52],xl:[44,62]};var A=s(21624),M=s(5273),_=s(92732),F=s(94866);let O=(0,B.om)("list-item-expand-icon"),P=({expanded:e,behavior:t="action",disabled:s})=>(0,i.jsx)(F.I,{direction:function({behavior:e,expanded:t}){if(t&&"action"===e)return"top";if(t&&"state"===e);else if(t&&"state-inverse"===e);else if("action"===e);else if("state"===e)return"right";else if("state-inverse"===e)return"left";return"bottom"}({behavior:t,expanded:e}),className:O(null,(0,_.$)({color:s?"hint":void 0})),size:16}),T=(0,B.om)("list-item-view"),L=e=>"object"==typeof e&&null!==e&&"title"in e,q=({children:e,indentation:t=1,className:s,...d})=>(0,i.jsx)(g.s,{width:16*t,className:T("slot",s),...d,children:e}),V=({startSlot:e,subtitle:t,endSlot:s,disabled:d,hasSelectionIcon:n,isGroup:r,indentation:a,expanded:o,selected:c,title:u,expandIconPlacement:p="start",renderExpandIcon:m=P})=>{let h=r?(0,i.jsx)(m,{behavior:"start"===p?"state":"action",expanded:o,disabled:d}):null;return(0,i.jsxs)(g.s,{alignItems:"center",justifyContent:"space-between",gap:"4",className:T("content"),children:[(0,i.jsxs)(g.s,{gap:"2",alignItems:"center",grow:!0,children:[n&&(0,i.jsx)(q,{children:c?(0,i.jsx)(l.I,{data:M.A,size:16,className:(0,_.$)({color:"info"})}):null}),a&&a>=1?(0,i.jsx)(q,{indentation:Math.floor(a)}):null,"start"===p&&h,e,(0,i.jsxs)("div",{className:T("main-content"),children:["string"==typeof u?(0,i.jsx)(I.E,{ellipsis:!0,color:d?"hint":void 0,variant:r?"subheader-1":void 0,children:u}):u,"string"==typeof t?(0,i.jsx)(I.E,{ellipsis:!0,color:d?"hint":"secondary",children:t}):t]})]}),(0,i.jsxs)(g.s,{gap:"2",children:["end"===p&&h,s]})]})},z=r.forwardRef(function({id:e,as:t,size:s="m",active:d,selected:n,disabled:l,selectionViewType:r="multiple",activeOnHover:a,className:o,height:c,dragging:u,style:p,content:m,role:I="option",onClick:h,...x},y){let f=l?void 0:h,b={minHeight:`var(--g-list-item-height, ${c??D[s][Number(!!(L(m)&&m?.subtitle))]}px)`,...p};return(0,i.jsx)(t||"li",{[$]:e,role:I,"aria-selected":n,onClick:f,className:T({active:u||d,selected:n&&"single"===r,activeOnHover:"boolean"==typeof a?a:!!f,radius:s,size:s,dragging:u,clickable:!!f},(0,A.Y)({px:2},o)),style:b,ref:y,...x,children:L(m)?(0,i.jsx)(V,{...m,hasSelectionIcon:"multiple"===r,selected:n,disabled:l}):m})}),U=(0,B.om)("tree-list"),W=({qa:e,id:t,size:s="m",className:d,list:n,multiple:l,containerRef:a,renderItem:o,renderContainer:c=R,onItemClick:p,mapItemDataToContentProps:m})=>{let I=(0,u.u)(),h=r.useRef(null),y=a??h,f=r.useMemo(()=>{if(null!==p)return(e,t)=>{let s={id:e.id,list:n};p?p?.(s,t):N({list:n,multiple:l})(s,t)}},[p,n,l]);return(({containerRef:e,onItemClick:t,enabled:s,list:i})=>{let d=r.useCallback((t,s=!0)=>{"number"==typeof t&&i.structure.visibleFlattenIds[t]&&(s&&((e,t)=>{if(document){let s=(t||document).querySelector(`[${$}="${e}"]`);s&&s.scrollIntoView?.({block:"nearest"})}})(i.structure.visibleFlattenIds[t],e?.current),i.state.setActiveItemId?.(i.structure.visibleFlattenIds[t]))},[i.structure.visibleFlattenIds,i.state,e]),n=r.useCallback((e,t,s=0)=>{e.preventDefault();let n="string"==typeof i.state.activeItemId?i.structure.visibleFlattenIds.findIndex(e=>e===i.state.activeItemId):-1;d((({list:e,index:t,step:s,disabledItemsById:i={}})=>{let d=e.length,n=(t+d)%d;for(let t=0;t<d;t+=1){let t=e[n];if(t&&!i[t])return n;n=(n+d+s)%d}})({list:i.structure.visibleFlattenIds,index:(n>-1?n:s)+t,step:Math.sign(t),disabledItemsById:i.state.disabledById}))},[d,i.state.activeItemId,i.state.disabledById,i.structure.visibleFlattenIds]);(0,x.N)(()=>{let d=e?.current;if(s||!d)return;let l=e=>{switch(e.key){case E.D.ARROW_DOWN:n(e,1,-1);break;case E.D.ARROW_UP:n(e,-1);break;case E.D.SPACEBAR:case E.D.ENTER:i.state.activeItemId&&!i.state.disabledById[i.state.activeItemId]&&(e.preventDefault(),t?.({id:i.state.activeItemId}))}};return d.addEventListener("keydown",l),()=>{d.removeEventListener("keydown",l)}},[e,s,n,i.state.activeItemId,i.state.disabledById,t])})({containerRef:y,onItemClick:f,list:n}),c({qa:e,id:`list-${t??I}`,size:s,containerRef:y,className:U(null,d),list:n,renderItem:(t,d,r)=>{let a=(({qa:e,list:t,onItemClick:s,mapItemDataToContentProps:i,size:d="m",multiple:n=!1,id:l})=>{let r={...t.structure.itemsState[l],...t.structure.groupsState[l],isLastItem:l===t.structure.visibleFlattenIds[t.structure.visibleFlattenIds.length-1]},a={id:l,size:d,selected:!!t.state.selectedById[l],disabled:!!t.state.disabledById?.[l],active:l===t.state.activeItemId,onClick:s?e=>s({id:l},e):void 0,selectionViewType:n&&!r.childrenIds?"multiple":"single",content:{expanded:t.state.expandedById?.[l],indentation:r.indentation,isGroup:t.state.expandedById&&l in t.state.expandedById,...i(t.structure.itemsById[l])}};return e&&(a.qa=`${e}-${l}`),{data:t.structure.itemsById[l],props:a,context:r}})({qa:e,id:t,size:s,multiple:l,mapItemDataToContentProps:m,onItemClick:f,list:n});return o?o({id:t,data:a.data,props:a.props,context:a.context,index:d,renderContainerProps:r,list:n}):(0,i.jsx)(z,{...a.props,...r})}})};var H=s(9017),J=s(95084),Y=s(83452);let G=({item:e,groupedId:t,getItemId:s})=>{let i=t;return"function"==typeof s?i=s(w(e)?e.data:e):e&&"object"==typeof e&&"id"in e&&e.id&&(i=e.id),i},K=(e,t)=>t?`${t}-${e}`:`${e}`,Q=(0,B.om)("tree-select"),X=e=>(0,i.jsx)(z,{...e.props,...e.renderContainerProps}),Z=r.forwardRef(function({id:e,qa:t,title:s,placement:d,slotBeforeListBody:n,slotAfterListBody:l,size:a="m",defaultOpen:o,width:c,containerRef:p,className:m,containerClassName:I,popupClassName:g,open:B,multiple:S,popupWidth:j,popupDisablePortal:C,items:k,value:R,defaultValue:E,placeholder:$,disabled:D=!1,withExpandedState:A=!0,defaultExpandedState:M="expanded",hasClear:_,errorMessage:F,errorPlacement:O,validationState:P,onClose:T,onOpenChange:L,onUpdate:q,renderControl:V,renderItem:z=X,renderContainer:U,mapItemDataToContentProps:Z,onFocus:ee,onBlur:et,getItemId:es,onItemClick:ei},ed){let en=(0,Y.I)(),el=(0,u.u)(),er=e??el,ea=`tree-select-popup-${er}`,eo=r.useRef(null),ec=r.useRef(null),eu=r.useRef(null),ep=p??eu,{errorMessage:em,errorPlacement:eI,validationState:eh}=(0,J.Av)({errorMessage:F,errorPlacement:O||"outside",validationState:P}),ex=(0,u.u)(),ey="invalid"===eh,ef=ey&&!!em&&"outside"===eI,eb=ey&&!!em&&"inside"===eI,ev=(0,h.N)(ed,ec),{toggleOpen:eg,open:eB}=(0,f.F)({defaultOpen:o,onClose:T,onOpenChange:L,open:B}),{value:eS,selectedById:ej,setSelected:ew}=(({defaultValue:e=[],value:t,onUpdate:s})=>{let[i,d]=r.useState(e),n=t??i,l=!t;return r.useMemo(()=>{let e=n.reduce((e,t)=>(e[t]=!0,e),{});return{value:n,selectedById:e,setSelected:t=>{let i=Object.entries("function"==typeof t?t(e):t).reduce((e,[t,s])=>(s&&e.push(t),e),[]);l?d(i):s?.(i)},setInnerValue:l?d:void 0}},[s,l,n])})({value:R,defaultValue:E,onUpdate:q}),eC=(({items:e,getItemId:t,defaultExpandedState:s="expanded",withExpandedState:i=!0,initialState:d,controlledState:n})=>{let{itemsById:l,groupsState:a,itemsState:o,initialState:c}=function({items:e,getItemId:t,defaultExpandedState:s}){let i=r.useRef(t).current;return r.useMemo(()=>(function({items:e,defaultExpandedState:t="expanded",getItemId:s}){let i={itemsById:{},groupsState:{},itemsState:{},initialState:{disabledById:{},selectedById:{},expandedById:{}}},d=({item:e,index:n,parentGroupedId:l,parentId:r})=>{let a=K(n,l),o=G({groupedId:a,item:e,getItemId:s});r&&i.groupsState[r].childrenIds.push(o),i.itemsById[o]=e.data,i.itemsState[o]||(i.itemsState[o]={indentation:0}),void 0!==r&&(i.itemsState[o].parentId=r),void 0!==e.selected&&(i.initialState.selectedById[o]=e.selected),void 0!==e.disabled&&(i.initialState.disabledById[o]=e.disabled),a&&(i.itemsState[o].indentation=a.split("-").length-1),e.children&&(i.groupsState[o]={childrenIds:[]},i.initialState.expandedById&&(void 0===e.expanded?i.initialState.expandedById[o]="expanded"===t:i.initialState.expandedById[o]=e.expanded),e.children.forEach((e,t)=>{d({item:e,index:t,parentGroupedId:a,parentId:o})}))};return e.forEach((e,t)=>w(e)?d({item:e,index:t}):(({item:e,index:t})=>{let d=G({groupedId:String(t),item:e,getItemId:s});i.itemsById[d]=e,i.itemsState[d]||(i.itemsState[d]={indentation:0}),e&&"object"==typeof e&&("selected"in e&&"boolean"==typeof e.selected&&(i.initialState.selectedById[d]=e.selected),"disabled"in e&&"boolean"==typeof e.disabled&&(i.initialState.disabledById[d]=e.disabled))})({item:e,index:t})),i})({items:e,getItemId:i,defaultExpandedState:s}),[i,s,e])}({items:e,getItemId:t,defaultExpandedState:s}),u=(({initialState:e,withExpandedState:t})=>{let s=r.useRef(e),i=s.current!==e;s.current=e;let[d,n]=r.useState(()=>e?.disabledById??{}),[l,a]=r.useState(()=>e?.selectedById??{}),[o,c]=r.useState(()=>e?.expandedById??{}),[u,p]=r.useState(()=>e?.activeItemId);i&&(e?.disabledById&&n(t=>({...e.disabledById,...t})),e?.selectedById&&a(t=>({...e.selectedById,...t})),e?.expandedById&&c(t=>({...e.expandedById,...t})),p(t=>t??e?.activeItemId));let m={disabledById:d,selectedById:l,activeItemId:u,setDisabled:n,setSelected:a,setActiveItemId:p};return t&&(m.expandedById=o,m.setExpanded=c),m})({initialState:r.useMemo(()=>({expandedById:{...c.expandedById,...d?.expandedById},selectedById:{...c.selectedById,...d?.selectedById},disabledById:{...c.disabledById,...d?.disabledById},activeItemId:d?.activeItemId}),[c.disabledById,c.expandedById,c.selectedById,d?.activeItemId,d?.disabledById,d?.expandedById,d?.selectedById]),withExpandedState:i}),p=r.useMemo(()=>n?{...u,...n}:u,[n,u]),{visibleFlattenIds:m,idToFlattenIndex:I,rootIds:h}=function({items:e,expandedById:t,getItemId:s}){return r.useMemo(()=>(function({items:e,getItemId:t,expandedById:s={}}){let i=[],d=(e,n,l,r)=>{let a=G({groupedId:K(l,r),item:n,getItemId:t});return r||i.push(a),e.push(a),w(n)&&n.children&&!(a in s&&!s[a])&&e.push(...n.children.reduce((e,t,s)=>d(e,t,s,a),[])),e},n=e.reduce((e,t,s)=>d(e,t,s),[]),l={};for(let[e,t]of n.entries())l[t]=e;return{rootIds:i,visibleFlattenIds:n,idToFlattenIndex:l}})({items:e,expandedById:t,getItemId:s}),[e,t,s])}({items:e,expandedById:p.expandedById,getItemId:t});return{state:p,structure:{rootIds:h,items:e,visibleFlattenIds:m,idToFlattenIndex:I,itemsById:l,groupsState:a,itemsState:o}}})({controlledState:{selectedById:ej,setSelected:ew},items:k,getItemId:es,defaultExpandedState:M,withExpandedState:A}),ek=r.useMemo(()=>{if(null!==ei)return(e,t)=>{let s={id:e.id,list:eC};if(ei)ei?.(s,t);else{N({list:eC,multiple:S})(s,t);let i=eC.state.expandedById&&e.id in eC.state.expandedById;S||i||eg(!1)}}},[ei,eC,S,eg]);(0,x.N)(()=>(eB&&ep.current?.focus({preventScroll:!0}),()=>eC.state.setActiveItemId(void 0)),[eB]);let eR=r.useCallback(()=>eg(!1),[eg]),{focusWithinProps:eN}=(0,y.R)({onFocusWithin:ee,onBlurWithin:r.useCallback(e=>{et?.(e),eR()},[eR,et])}),eE={list:eC,open:eB,placeholder:$,toggleOpen:eg,clearValue:()=>eC.state.setSelected({}),ref:ev,size:a,value:eS,disabled:D,id:er,activeItemId:eC.state.activeItemId,title:s,errorMessage:eb?em:void 0,errorPlacement:eI,validationState:eh,hasClear:_,isErrorVisible:ey},e$=V?V(eE):(0,i.jsx)(b.Y,{...eE,selectedOptionsContent:r.Children.toArray(eS.map(e=>e in eC.structure.itemsById?Z(eC.structure.itemsById[e]).title:"")).join(", "),view:"normal",pin:"round-round",popupId:ea,selectId:er}),eD={..."max"===c&&{width:c}},eA={};return"number"==typeof c&&(eA.width=c),(0,i.jsxs)("div",{ref:eo,...eN,className:Q(eD,m),style:eA,children:[e$,(0,i.jsxs)(v.t,{ref:eo,className:Q("popup",{size:a},g),controlRef:ec,width:j,placement:d,open:eB,handleClose:eR,disablePortal:C,mobile:en,id:ea,children:[n,(0,i.jsx)(W,{list:eC,size:a,className:Q("list",I),qa:t,multiple:S,id:`list-${er}`,containerRef:ep,onItemClick:ek,renderContainer:U,mapItemDataToContentProps:Z,renderItem:z??X}),l]}),(0,i.jsx)(H.o,{errorMessage:ef?em:null,errorMessageId:ex})]})});var ee=s(33777),et=s(38221);function es(e,t){return!t||"object"!=typeof t||!("title"in t)||"string"!=typeof t.title||t.title.toLowerCase().includes((e||"").toLowerCase())}var ei=s(13786),ed=JSON.parse('{"button_apply":"Apply","button_reset":"Reset","button_switcher":"Columns"}'),en=JSON.parse('{"button_apply":"Применить","button_reset":"Сбросить","button_switcher":"Колонки"}');let el=(0,ei.N)({en:ed,ru:en},"TableColumnSetupInner"),er=(0,B.om)("inner-table-column-setup"),ea=er("controls"),eo=er("filter-input"),ec=er("empty-placeholder"),eu={isDragDisabled:!0},ep=e=>({title:e.title}),em=(e,t)=>"string"!=typeof t.title||t.title.toLowerCase().includes(e.trim().toLowerCase()),eI=e=>{let{renderSwitcher:t,popupWidth:s,popupPlacement:h,items:x,onUpdate:y,sortable:f,renderControls:b,className:v,defaultItems:B=x,showResetButton:S,filterable:C,filterPlaceholder:k,filterEmptyMessage:R,filterSettings:N=em,hideApplyButton:E}=e,[$,D]=r.useState(!1),[A,M]=r.useState(f),[_,F]=r.useState(f);f!==_&&(F(f),M(f));let[O,P]=(0,p.P)(E?x:void 0,x,E?y:void 0),[T,L]=r.useState(x);x!==T&&(L(x),E||P(x));let{t:q}=el.useTranslation(),V=function({items:e,initialFilterValue:t="",filterItem:s,onFilterChange:i,filterItems:d,debounceTimeout:n=300}){let l=r.useRef(null),[a,o]=r.useState(t),[c,u]=r.useState(e),[p,m]=r.useState(e),I=r.useCallback((e,t)=>{if(d)return()=>d(e,t);if(e){let i=s||es;return()=>{var s;let d;return s=t=>i(e,t),d=(e,t)=>{if(w(t)&&t.children){let i=t.children.reduce(d,[]);i.length?e.push({...t,data:t.data,children:i}):s(t.data)&&e.push({...t,data:t.data,children:[]})}else if(w(t)&&s(t.data)){let{children:s,...i}=t;e.push(i)}else!w(t)&&s(t)&&e.push(t);return e},t.reduce(d,[])}}return()=>t},[s,d]);e!==c&&(m(I(a,e)),u(e));let h=r.useCallback(et(t=>m(I(t,e)),n),[m,I,e,n]),{onFilterUpdate:x,reset:y}=r.useMemo(()=>({reset:()=>{o(t),i?.(t),h(t)},onFilterUpdate:e=>{o(e),i?.(e),h(e)}}),[h,t,i]);return{filterRef:l,filter:a,reset:y,items:p,onFilterUpdate:x}}({items:O,filterItem:N,debounceTimeout:0}),U=()=>{y(O.map(({id:e,isSelected:t})=>({id:e,isSelected:t}))),G(!1)},W=()=>(0,i.jsx)(n.$,{view:"action",width:"max",onClick:U,children:q("button_apply")}),H="function"==typeof S?S(O):S,J=(({onDragEnd:e,renderControls:t})=>{let s=(0,u.u)();return({renderItem:d,list:n,containerRef:l,id:a,className:o})=>{let{stickyStartItemIdList:u,sortableItemIdList:p,stickyEndItemIdList:m}=((e,t)=>{let s=0;for(;s!==t.length;s++){let i=e[t[s]];if(i?.sticky!=="left"&&i?.sticky!=="start")break}let i=t.length;for(;0!==i;i--){let s=e[t[i-1]];if(s?.sticky!=="right"&&s?.sticky!=="end")break}return{stickyStartItemIdList:t.slice(0,s),sortableItemIdList:t.slice(s,i),stickyEndItemIdList:t.slice(i)}})(n.structure.itemsById,n.structure.visibleFlattenIds),I=u.map((e,t)=>d(e,t,eu)),h=p.map((e,t)=>d(e,t+u.length)),x=m.map((e,t)=>d(e,I.length+h.length+t,eu));return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)(j,{ref:l,id:a,className:o,children:[I,(0,i.jsx)(c.JY,{onDragEnd:e,children:(0,i.jsx)(c.gL,{droppableId:s,renderClone:(e,t,s)=>d(n.structure.visibleFlattenIds[s.source.index],s.source.index,{provided:e,snapshot:t}),children:e=>(0,i.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[h,e.placeholder]})})}),x]}),(0,i.jsx)("div",{className:ea,children:t()})]})}})({onDragEnd:({destination:e,source:t})=>{e?.index!==void 0&&e?.index!==t.index&&P(((e,t,s)=>{let i=[...e],[d]=i.splice(t,1);return i.splice(s,0,d),i})(O,t.index,e.index))},renderControls:()=>b?b({DefaultApplyButton:W,onApply:U}):(0,i.jsxs)(g.s,{gapRow:1,direction:"column",className:ea,children:[H&&(0,i.jsx)(n.$,{onClick:()=>{E&&y(B),P(B)},width:"max",children:q("button_reset")}),!E&&(0,i.jsx)(W,{})]})}),Y=({data:e,props:t,index:s,renderContainerProps:d})=>{let n=!1===A||d?.isDragDisabled===!0,u=n?void 0:(0,i.jsx)(l.I,{data:a.A,size:16}),p=e.isRequired?(0,i.jsx)(l.I,{data:o}):void 0,m=!e.isRequired&&t.selected,I={...t,selected:m,selectionViewType:e.isRequired?"single":"multiple",content:{...t.content,startSlot:p,endSlot:u}};if(n)return(0,r.createElement)(z,{...I,key:I.id});let h=(e,t)=>(0,i.jsx)(z,{...I,...e.draggableProps,...e.dragHandleProps,ref:e.innerRef,dragging:t.isDragging});return d?.provided&&d.snapshot?h(d.provided,d.snapshot):(0,i.jsx)(c.sx,{draggableId:t.id,index:s,isDragDisabled:n,children:h},`item-key-${t.id}`)},G=e=>{D(e),!1===e&&(P(x),M(f),V.reset())},K=r.useMemo(()=>{let e;return e=[],O.forEach(({id:t,isSelected:s})=>{s&&e.push(t)}),e},[O]),Q=()=>(0,i.jsx)(I.E,{className:ec,children:R}),X=C?(0,i.jsx)(ee.k,{size:"m",view:"clear",placeholder:k,value:V.filter,className:eo,onUpdate:e=>{V.onFilterUpdate(e),M(!e.length)},hasClear:!0}):null,ei=V.filter&&!V.items.length?Q:J;return(0,i.jsx)(Z,{className:er(null,v),mapItemDataToContentProps:ep,multiple:!0,size:"l",open:$,value:K,items:V.filter?V.items:O,onUpdate:e=>{P(O.map(t=>({...t,isSelected:t.isRequired||e.includes(t.id)})))},popupWidth:s,onOpenChange:G,placement:h,slotBeforeListBody:X,renderContainer:ei,renderControl:({toggleOpen:e})=>{let s=(0,m.h)(e);return t?.({onClick:e,onKeyDown:s})||(0,i.jsxs)(n.$,{onClick:e,onKeyDown:s,children:[(0,i.jsx)(l.I,{data:d.A}),q("button_switcher")]})},renderItem:Y})};var eh=JSON.parse('{"button_switcher":"Columns"}'),ex=JSON.parse('{"button_switcher":"Колонки"}');let ey=(0,ei.N)({en:eh,ru:ex},"TableColumnSetup"),ef=(0,B.om)("table-column-setup"),eb=e=>{let{switcher:t,renderSwitcher:s,disabled:r,popupWidth:a,popupPlacement:o,className:c,items:u,sortable:p=!0,showStatus:m,onUpdate:I,hideApplyButton:h}=e,{t:x}=ey.useTranslation(),y=u.map(({id:e,title:t,required:s,selected:i,sticky:d})=>({id:e,title:t,isRequired:s,isSelected:i,sticky:d}));return(0,i.jsx)(eI,{hideApplyButton:h,items:y,onUpdate:e=>{I(e.map(({id:e,isSelected:t})=>{let s=u.find(t=>t.id===e);return{id:e,selected:t,title:s?.title,required:s?.required}}))},popupPlacement:o,popupWidth:a,renderSwitcher:e=>s?.(e)||t||(0,i.jsxs)(n.$,{disabled:r,onClick:e.onClick,children:[(0,i.jsx)(l.I,{data:d.A}),x("button_switcher"),(()=>{if(!m)return null;let e=u.reduce((e,t)=>t.selected?e+1:e,0),t=u.length,s=`${e}/${t}`;return(0,i.jsx)("span",{className:ef("status"),children:s})})()]}),sortable:p,className:ef(null,c)})}}}]);