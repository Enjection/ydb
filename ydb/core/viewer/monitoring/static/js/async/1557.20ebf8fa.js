"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([["1557"],{23273:function(e,t,n){n.d(t,{E:()=>f});var l=n(74848),s=n(32065),i=n(24629),r=n(43834),a=n(56496),o=n(25247),c=n(61738),d=n(51432),u=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}');let m=(0,d.g4)("ydb-diagnostics-autorefresh-control",{en:u}),h=(0,o.cn)("auto-refresh-control");function f({className:e,onManualRefresh:t}){let n=(0,c.YQ)(),[o,d]=(0,c.Nt)();return(0,l.jsxs)("div",{className:h(null,e),children:[(0,l.jsx)(i.$,{view:"flat-secondary",onClick:()=>{n(a.F.util.invalidateTags(["All"])),t?.()},"aria-label":m("Refresh"),children:(0,l.jsx)(i.$.Icon,{children:(0,l.jsx)(s.A,{})})}),(0,l.jsxs)(r.l,{value:[String(o)],onUpdate:e=>{d(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,l.jsx)(r.l.Option,{value:"0",children:m("None")}),(0,l.jsx)(r.l.Option,{value:"15000",children:m("15 sec")}),(0,l.jsx)(r.l.Option,{value:"60000",children:m("1 min")}),(0,l.jsx)(r.l.Option,{value:"120000",children:m("2 min")}),(0,l.jsx)(r.l.Option,{value:"300000",children:m("5 min")})]})]})}},5948:function(e,t,n){n.d(t,{s:()=>r});var l=n(74848);n(96540);var s=n(29901);let i=(0,n(25247).cn)("ydb-cell-with-popover");function r({children:e,className:t,wrapperClassName:n,fullWidth:r,...a}){return(0,l.jsx)("div",{className:i({"full-width":r},n),children:(0,l.jsx)(s.A,{openDelay:100,closeDelay:100,className:i("popover",{"full-width":r}),...a,children:(0,l.jsx)("div",{className:i("children-wrapper",{"full-width":r},t),children:e})})})}},80720:function(e,t,n){n.d(t,{u:()=>r});var l=n(74848),s=n(96540),i=n(54403);let r=({children:e,content:t,className:n,pinOnClick:r,hasArrow:a=!0,placement:o=["top","bottom"],...c})=>{let[d,u]=s.useState(!1),[m,h]=s.useState(!1),f=s.useRef(null);return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(i.z,{anchorElement:f.current,open:m||d,placement:o,hasArrow:a,onOutsideClick:()=>{h(!1)},...c,children:t}),(0,l.jsx)("span",{className:n,ref:f,onClick:r?()=>{h(!0)}:void 0,onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},children:e})]})}},53211:function(e,t,n){n.d(t,{T:()=>o});var l=n(74848),s=n(5434),i=n(25247);let r=(0,n(51432).g4)("ydb-entities-count",{ru:{of:"из"},en:{of:"of"}}),a=(0,i.cn)("ydb-entities-count"),o=({total:e,current:t,label:n,loading:i,className:o})=>{let c="";return n&&(c+=`${n}: `),i?c+="...":(c+=`${t}`,e&&Number(e)!==Number(t)&&(c+=` ${r("of")} ${e}`)),(0,l.jsx)(s.J,{theme:"info",size:"m",className:a(null,o),children:c})}},80865:function(e,t,n){n.d(t,{z:()=>o});var l=n(74848),s=n(96540),i=n(25247),r=n(64349);let a=(0,i.cn)("info-viewer"),o=({title:e,info:t,dots:n=!0,size:i,variant:o="default",className:c,multilineLabels:d,renderEmptyState:u})=>t&&t.length||!u?(0,l.jsxs)("div",{className:a({size:i,variant:o},c),children:[e&&(0,l.jsx)("div",{className:a("title"),children:e}),t&&t.length>0?(0,l.jsx)("div",{className:a("items"),children:t.map((e,t)=>(0,l.jsxs)("div",{className:a("row"),children:[(0,l.jsxs)("div",{className:a("label"),children:[(0,l.jsx)("div",{className:a("label-text",{multiline:d}),children:e.label}),n&&(0,l.jsx)("div",{className:a("dots")})]}),(0,l.jsx)("div",{className:a("value"),children:e.value})]},t))}):(0,r.A)("no-data")]}):(0,l.jsx)(s.Fragment,{children:u({title:e,size:i})})},64349:function(e,t,n){n.d(t,{A:()=>i});var l=n(51432),s=JSON.parse('{"common.created":"Created","common.type":"Type","no-data":"No data"}');let i=(0,l.g4)("ydb-components-info-viewer",{en:s})},83758:function(e,t,n){n.d(t,{Hr:()=>s.H,jl:()=>s.j,z_:()=>l.z});var l=n(80865),s=n(2275)},2275:function(e,t,n){function l({values:e,labels:t,defaultValueFormatter:n}){return(l,s)=>{let i;return{label:(t||{})[l]??l,value:(i=(e||{})[l]||n)?i(s):s}}}n.d(t,{H:()=>l,j:()=>s});let s=(e,t)=>t?Object.entries(t).map(([t,n])=>e(t,n)).filter(({value:e})=>!!e):[]},48649:function(e,t,n){n.d(t,{_:()=>d});var l=n(74848),s=n(25247),i=n(80720),r=n(9185);let a=(0,s.cn)("ydb-pool-bar"),o=({data:e={}})=>{let{Usage:t=0}=e,n=Math.min(100*t,100),s=n>=75?"danger":n>=50&&n<75?"warning":"normal";return(0,l.jsx)(i.u,{className:a({type:s}),content:(0,l.jsx)(r.HG,{data:e,className:a("popup-content")}),children:(0,l.jsx)("div",{style:{height:`${n}%`},className:a("value",{type:s})})})},c=(0,s.cn)("ydb-pools-graph"),d=({pools:e=[]})=>(0,l.jsx)("div",{className:c(),children:e.map((e,t)=>(0,l.jsx)(o,{data:e},t))})},29472:function(e,t,n){n.d(t,{v:()=>c});var l=n(74848);n(96540);var s=n(25247),i=n(33777),r=n(36354);let a=({onUpdate:e,value:t="",debounce:n=200,...s})=>{let[a,o]=(0,r.o)({value:t,onUpdate:e,debounce:n});return(0,l.jsx)(i.k,{value:a,onUpdate:o,...s})},o=(0,s.cn)("ydb-search"),c=({onChange:e,value:t="",width:n,className:s,debounce:i,inputRef:r,...c})=>(0,l.jsx)(a,{debounce:i,hasClear:!0,autoFocus:!0,controlRef:r,style:{width:n},className:o(null,s),value:t,onUpdate:e,...c})},31596:function(e,t,n){n.d(t,{O:()=>c});var l=n(74848),s=n(64482),i=n(77269),r=n(24629),a=n(17427),o=n(98537);function c(e){let{items:t,showStatus:n,disabled:c}=e;return(0,l.jsx)(o.O,{...e,renderSwitcher:e=>(0,l.jsxs)(r.$,{disabled:c,onClick:e.onClick,children:[(0,l.jsx)(a.I,{data:s.A}),(()=>{if(!n)return null;let e=t.reduce((e,t)=>t.selected?e+1:e,0),s=t.length;return(0,l.jsxs)(i.E,{color:"secondary",children:[e,"/",s]})})()]}),hideApplyButton:!0})}},48849:function(e,t,n){n.d(t,{L:()=>c});var l=n(74848),s=n(96540),i=n(85169),r=n(25247),a=n(78951);let o=(0,r.cn)("ydb-table-with-controls-layout"),c=({children:e,className:t,fullHeight:n})=>(0,l.jsx)("div",{className:o({"full-height":n},t),children:e});c.Controls=function({children:e,renderExtraControls:t,className:n}){return(0,l.jsxs)(i.s,{justifyContent:"space-between",className:o("controls-wrapper"),gap:2,children:[(0,l.jsx)("div",{className:o("controls",n),children:e}),(0,l.jsx)("div",{className:o("extra-controls"),children:t?.()})]})},c.Table=function({children:e,loading:t,className:n,scrollContainerRef:i,scrollDependencies:r=[]}){let c=s.useRef(null);return((({tableContainerRef:e,scrollContainerRef:t,dependencies:n=[]})=>{let l=s.useCallback(()=>{if(e?.current){let t=window.getComputedStyle(e.current).getPropertyValue("--data-table-sticky-header-offset");return t?parseInt(t,10):0}return 0},[e]),i=s.useCallback(()=>{if(e?.current&&t?.current){let n=l(),s=e.current.getBoundingClientRect(),i=t.current.getBoundingClientRect(),r=s.top-i.top+t.current.scrollTop;s.top-n<i.top&&t.current.scrollTo(0,r-n)}},[t,e,l]);return s.useLayoutEffect(()=>{e&&t&&i()},[i,e,t,...n])})({tableContainerRef:c,scrollContainerRef:i,dependencies:r}),t)?(0,l.jsx)(a.Q,{className:o("loader")}):(0,l.jsx)("div",{ref:c,className:o("table",n),children:e})}},9185:function(e,t,n){n.d(t,{Qz:()=>x,HG:()=>v,nL:()=>p,p:()=>u});var l=n(74848),s=n(96540),i=n(70583),r=n(60318),a=n(70073),o=n(51432),c=JSON.parse('{"field_rack":"Rack","field_host":"Host","field_links":"Links","context_developer-ui":"Developer UI","field_database":"Database","field_roles":"Roles"}');let d=(0,o.g4)("ydb-node-name-tooltip",{en:c}),u=({data:e})=>{let t=(0,i.n)(e),n=s.useMemo(()=>{let n,s,i=(n=[],e?.Roles?.length&&n.push({name:d("field_roles"),content:e.Roles.join(", ")}),(s=e?.Tenants?.[0])&&n.push({name:d("field_database"),content:s,copyText:s}),e?.Host&&n.push({name:d("field_host"),content:e.Host,copyText:e.Host}),e?.Rack&&n.push({name:d("field_rack"),content:e.Rack}),e?.Endpoints&&e.Endpoints.length&&e.Endpoints.forEach(({Name:e,Address:t})=>{e&&t&&n.push({name:e,content:t,copyText:t})}),n);return t&&i.push({name:d("field_links"),content:(0,l.jsx)(r.K,{title:d("context_developer-ui"),url:t})}),i},[e,t]);return(0,l.jsx)(a.n,{items:n,compact:!0,responsive:!0,nameMaxWidth:"auto"})};var m=n(83758),h=n(9753);let f=(0,m.Hr)({values:{ChangeTime:e=>(0,l.jsx)(h.H,{ChangeTime:e})},labels:{TabletId:"Tablet"},defaultValueFormatter:e=>e&&String(e)}),p=({data:e={},className:t})=>{let{TabletId:n,NodeId:s,State:i,Type:r,ChangeTime:a,Generation:o}=e,c=(0,m.jl)(f,{TabletId:n,NodeId:s,State:i,Type:r,ChangeTime:a,Generation:o});return(0,l.jsx)(m.z_,{className:t,info:c,dots:!1,size:"s"})},x=(0,m.Hr)({values:{Usage:e=>e&&`${(100*Number(e)).toFixed(2)} %`},labels:{Name:"Pool"},defaultValueFormatter:e=>e&&String(e)}),v=({data:e={},className:t})=>{let n=(0,m.jl)(x,e);return(0,l.jsx)(m.z_,{className:t,info:n,dots:!1,size:"s"})}},9753:function(e,t,n){n.d(t,{H:()=>m,p:()=>u});var l=n(74848);n(96540);var s=n(66918),i=n(35537),r=n(97855),a=n(5948),o=n(51432),c=JSON.parse('{"start-time":"Start time","disconnect-time":"Disconnect time","change-time":"Change time"}');let d=(0,o.g4)("ydb-uptime-viewer",{en:c});function u({StartTime:e,DisconnectTime:t}){let n,o=null;return(t?(n=(0,r.wI)(t),o=(0,l.jsx)(s.u.Item,{name:d("disconnect-time"),children:(0,r.r6)(t,{withTimeZone:!0})},"DisconnectTime")):e&&(n=(0,r.H7)(e),o=(0,l.jsx)(s.u.Item,{name:d("start-time"),children:(0,r.r6)(e,{withTimeZone:!0})},"StartTime")),n)?(0,l.jsx)(a.s,{placement:["top","bottom"],disabled:!o,content:(0,l.jsx)(s.u,{responsive:!0,children:o}),children:n}):i.Pd}function m({ChangeTime:e}){let t;return(e&&(t=(0,r.H7)(e)),t)?(0,l.jsx)(a.s,{placement:["top","bottom"],content:(0,l.jsx)(s.u,{responsive:!0,children:(0,l.jsx)(s.u.Item,{name:d("change-time"),children:(0,r.r6)(e,{withTimeZone:!0})},"changeTime")}),children:t}):i.Pd}},70073:function(e,t,n){n.d(t,{n:()=>f});var l=n(74848),s=n(96540),i=n(85169),r=n(5434),a=n(17427),o=n(66918),c=n(25247),d=n(51432),u=JSON.parse('{"no-data":"No data"}');let m=(0,d.g4)("ydb-definition-list",{en:u}),h=(0,c.cn)("ydb-definition-list");function f({title:e,titleSuffix:t,titleSeparator:n="•",headerLabels:c,iconSize:d=12,labelSize:u="xs",footer:f,items:p,compact:x,nameMaxWidth:v=220,className:j,titleClassname:b,...N}){let g=!!(e||t||c&&c.length);return(0,l.jsxs)("div",{className:h({compact:x}),children:[g?(0,l.jsxs)(i.s,{className:h("header"),justifyContent:"space-between",gap:2,alignItems:"center",children:[e&&(0,l.jsxs)(i.s,{gap:"1",alignItems:"center",children:[(0,l.jsx)("div",{className:h("title",b),children:e}),t&&(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("div",{className:h("title-suffix"),children:n}),(0,l.jsx)("div",{className:h("title-suffix"),children:t})]})]}),c&&c.length>0&&(0,l.jsx)(i.s,{gap:1,alignItems:"center",children:c.map(e=>(0,l.jsx)(r.J,{theme:e.theme,icon:e.icon?(0,l.jsx)(a.I,{data:e.icon,size:d}):void 0,size:u,children:e.value},e.id))})]}):null,(()=>{if(p.length){let e="auto"===v?N:{...N,nameMaxWidth:v};return(0,l.jsx)(o.u,{className:h("properties-list",j),...e,children:p.map((e,t)=>{let n,{name:s,content:i,copyText:r,...a}=e;return"string"==typeof r?n=r||void 0:"number"==typeof r&&(n=String(r)),(0,l.jsx)(o.u.Item,{name:s,children:i,copyText:n,...a},s+t)})})}return m("no-data")})(),f?(0,l.jsx)("div",{className:h("footer"),children:f}):null]})}},36354:function(e,t,n){n.d(t,{o:()=>s});var l=n(96540);function s({value:e,onUpdate:t,debounce:n=200}){let[s,i]=l.useState(e),r=l.useRef();return l.useEffect(()=>{i(t=>t!==e?e:t)},[e]),[s,e=>{i(e),window.clearTimeout(r.current),r.current=window.setTimeout(()=>{t?.(e)},n)}]}},70583:function(e,t,n){n.d(t,{n:()=>c});var l=n(29620),s=n(71790),i=n(67222),r=n(88387),a=n(39279),o=n(3715);function c(e){let t=(0,o.N)(e=>e.singleClusterMode),{balancer:n=l.Hs,settings:c}=(0,s.Zd)(),d=(0,r.So)(),u=i.J.useMetaProxy&&c?.use_meta_proxy!==!1;if(d){if(!t){let t=(0,a.D)(e?.NodeId,n,u);return t?(0,r.Un)(t):void 0}if(e?.NodeId){let t=(0,r.Kx)(e.NodeId);return(0,r.Un)(t)}}}},33702:function(e,t,n){n.d(t,{K:()=>r});var l=n(96540),s=n(75442);function i(e){if("string"==typeof e)return{id:e,selected:!0};if(e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id){let t="selected"in e&&!!e.selected;return{id:e.id,selected:t}}}let r=(e,t,n,r,a)=>{let[o,c]=(0,s.i)(t,r),d=l.useMemo(()=>(Array.isArray(o)?o:r).map(i).filter(e=>void 0!==e),[r,o]),u=l.useMemo(()=>{let t=new Set(e.map(e=>e.name)),n=[],l=new Set;return d.forEach(e=>{t.has(e.id)&&(n.push(e),l.add(e.id))}),e.forEach(e=>{l.has(e.name)||n.push({id:e.name,selected:!1})}),n},[e,d]),m=l.useMemo(()=>u.reduce((t,{id:l,selected:s})=>{let i=a?.includes(l),r=e.find(e=>e.name===l);return r&&t.push({id:l,title:n[l],selected:s||i,required:i,sticky:i?"start":void 0,column:r}),t},[]).toSorted((e,t)=>Number(!!t.required)-Number(!!e.required)),[e,n,a,u]);return{columnsToShow:l.useMemo(()=>m.filter(e=>e.selected).map(e=>e.column),[m]),columnsToSelect:m,setColumns:l.useCallback(e=>{c(e.map(({id:e,selected:t})=>({id:e,selected:t})))},[c])}}}}]);